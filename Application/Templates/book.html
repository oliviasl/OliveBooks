{% extends "layout.html" %}

{% block title %}
    {{ book.title }}
{% endblock %}

{% block style %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/index.css') }}">
{% endblock %}

{% block body %}
<div class="container" id="header">
    <div class="row">
        <div class="col-xl-8 col-lg-8 col-md-8 col-sm-6">
            <h1>Olive Books</h1>
        </div>
        <div class="col-xl-2 col-lg-2 col-md-2 col-sm-3">
            <p></p>
            <form action="{{ url_for('search') }}">
                <div class="form-group">
                    <button class="btn btn-light btn-lg">Search</button>
                </div>
            </form>
        </div>
        <div class="col-xl-2 col-lg-2 col-md-2 col-sm-3">
            <p>{{ username }}</p>
            <form action="{{ url_for('index') }}">
                <div class="form-group">
                    <button class="btn btn-info">Logout</button>
                </div>
            </form>
        </div>
    </div>
</div>

    <div class="container" id="body">
            <h3>{{ book.title }}</h3>
            <h6>Author: {{ book.author }}</h6>
            <h6>ISBN: {{ book.isbn }}</h6>
            <h6>Total ratings: {{ total_ratings }}</h6>
            <h6>Average rating: {{ average_rating }}</h6>
    </div>

    {% if rating == None %}
    <div class="container" id="submission">
        <form class="" action="{{ url_for('processreview')}}" method="post">
            <h3>Submit a Review</h3>
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <label class="input-group-text" for="inputGroupSelect01">Rating</label>
              </div>
              <select class="custom-select" id="inputGroupSelect01" name="rating">
                <option selected>Choose...</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
              </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlTextarea1">Review</label>
                <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="review"></textarea>
            </div>
            <button class="btn btn-info" type="submit" value="{{ book.id }}" name="book_id">Submit</button>
        </form>
    </div>
    {% else %}
    <div class="container" id="submission">
        <h3>Your Review</h3>
        <p>Rating: {{ rating }}</p>
        <p>Review: {{ review }}</p>
    </div>
    {% endif %}


{% endblock %}
